# Phase-one golden capture stubs

Each subdirectory corresponds to a preset from `tests/data/phase1/`. Replace the
README in each folder with the deterministic capture generated by running the
legacy renderer as described in `tests/data/phase1/README.md` or by invoking the
automation script documented below.

## Payload

Expected payload per preset:

- `hashes.txt` — the SHA256 digest list emitted by `avs-player --headless`
- `frame_00000.png` … `frame_00179.png` — raw framebuffer dumps for CI spot checks
- `preset.avs` — copy of the preset that produced the capture (kept in sync with
  the source tree)

The integration test pairs presets and goldens by shared directory name, so do
not rename these folders without updating the lookup logic.

## Quick generation helper

The repository ships the helper script `tests/scripts/generate_phase1_goldens.py`
which captures a reduced set of frames (10 by default, matching the integration
tests) using the locally built `avs-player`. This keeps the git history free of
binary artifacts while allowing developers to generate working goldens on demand.

Example usage from the repository root after building the player (Release builds
produce hashes that match CI best):

```bash
cmake -S . -B build -DCMAKE_BUILD_TYPE=Release
cmake --build build --target avs-player -j"$(nproc)"
python3 tests/scripts/generate_phase1_goldens.py --install-to-golden --overwrite
```

The script writes captures to `build/generated_goldens/phase1/<preset>` by
default. Passing `--install-to-golden` mirrors the output into
`tests/golden/phase1/<preset>` so the deterministic render tests can consume it.
