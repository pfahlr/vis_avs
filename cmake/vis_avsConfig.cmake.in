@PACKAGE_INIT@

include(CMakeFindDependencyMacro)

set(vis_avs_RESOURCES_INSTALL_DIR "@AVS_RESOURCES_INSTALL_DIR@")
set(vis_avs_RESOURCES_INSTALL_FULL_DIR "@AVS_RESOURCES_INSTALL_FULL_DIR@")
set(vis_avs_ENABLE_SDL3 "@AVS_ENABLE_SDL3@")

find_dependency(OpenGL)
find_package(PkgConfig REQUIRED)

if(vis_avs_ENABLE_SDL3)
  if(NOT TARGET SDL3::SDL3)
    find_package(SDL3 QUIET)
    if(NOT TARGET SDL3::SDL3)
      pkg_check_modules(SDL3 QUIET IMPORTED_TARGET sdl3)
      if(NOT TARGET SDL3::SDL3 AND TARGET PkgConfig::SDL3)
        add_library(SDL3::SDL3 ALIAS PkgConfig::SDL3)
      endif()
    endif()
  endif()
  if(NOT TARGET SDL3::SDL3)
    message(FATAL_ERROR "vis_avs requires SDL3 but it was not found")
  endif()
else()
  if(NOT TARGET SDL2::SDL2)
    find_package(SDL2 2.28 QUIET)
    if(NOT TARGET SDL2::SDL2)
      pkg_check_modules(SDL2 QUIET IMPORTED_TARGET sdl2>=2.28)
      if(NOT TARGET SDL2::SDL2 AND TARGET PkgConfig::SDL2)
        add_library(SDL2::SDL2 ALIAS PkgConfig::SDL2)
      endif()
    endif()
  endif()
  if(NOT TARGET SDL2::SDL2)
    message(FATAL_ERROR "vis_avs requires SDL2 but it was not found")
  endif()
endif()

if(NOT TARGET PortAudio::PortAudio)
  find_package(PortAudio QUIET)
  if(NOT TARGET PortAudio::PortAudio)
    pkg_check_modules(PORTAUDIO QUIET IMPORTED_TARGET portaudio-2.0)
    if(NOT TARGET PortAudio::PortAudio AND TARGET PkgConfig::PORTAUDIO)
      add_library(PortAudio::PortAudio ALIAS PkgConfig::PORTAUDIO)
    endif()
  endif()
  if(NOT TARGET PortAudio::PortAudio)
    pkg_check_modules(PORTAUDIO QUIET IMPORTED_TARGET portaudio)
    if(NOT TARGET PortAudio::PortAudio AND TARGET PkgConfig::PORTAUDIO)
      add_library(PortAudio::PortAudio ALIAS PkgConfig::PORTAUDIO)
    endif()
  endif()
  if(NOT TARGET PortAudio::PortAudio)
    message(FATAL_ERROR "vis_avs requires PortAudio but it was not found")
  endif()
endif()

pkg_check_modules(SAMPLERATE REQUIRED IMPORTED_TARGET samplerate)
if(NOT TARGET PkgConfig::SAMPLERATE)
  message(FATAL_ERROR "vis_avs requires libsamplerate but it was not found")
endif()

include("${CMAKE_CURRENT_LIST_DIR}/vis_avsTargets.cmake")
